@use './variables' as *;

html[dir="rtl"] {
    direction: rtl;
    text-align: right;
}

:root {
    /* Expose as CSS variables for dynamic usage if needed */
    --color-primary-500: #{$color-primary-500};
    --color-primary-900: #{$color-primary-900};

    --color-bg-primary: #{$color-bg-light};
    --color-bg-secondary: #{$color-bg-light-sec};
    --color-bg-card: #ffffff;
    --color-text-primary: #{$color-text-light};
    --color-text-secondary: #{$color-text-light-secondary};

    /* Input colors */
    --color-input-bg: #ffffff;
    --color-input-border: #d4d4d4;
    --color-input-text: #{$color-text-light};

    /* Table colors */
    --color-table-header: #f5f5f5;
    --color-table-row-hover: #f0f0f0;
}

[data-theme="dark"] {
    --color-bg-primary: #{$color-bg-dark};
    --color-bg-secondary: #{$color-bg-dark-sec};
    --color-bg-card: #{$color-bg-dark-sec};
    --color-text-primary: #{$color-text-dark};
    --color-text-secondary: #{$color-text-dark-secondary};

    /* Input colors - dark */
    --color-input-bg: #{$color-input-dark-bg};
    --color-input-border: #{$color-input-dark-border};
    --color-input-text: #{$color-text-dark};

    /* Table colors - dark */
    --color-table-header: #{$color-table-dark-header};
    --color-table-row-hover: #{$color-table-dark-row-hover};
}

body {
    background-color: var(--color-bg-primary);
    color: var(--color-text-primary);
    font-family: 'Cairo', 'Tajawal', 'IBM Plex Sans Arabic', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    margin: 0;
    min-height: 100vh;
    transition: background-color 0.3s, color 0.3s;
    font-weight: 400;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;

    // Better text contrast in dark mode
    [data-theme="dark"] & {
        text-shadow: 0 0 1px rgba(255, 255, 255, 0.1);
    }
}

* {
    box-sizing: border-box;
}

a {
    text-decoration: none;
    color: inherit;
}

// Enhanced headings for dark mode
h1,
h2,
h3,
h4,
h5,
h6 {
    [data-theme="dark"] & {
        text-shadow: 0 0 20px rgba($color-primary-500, 0.15);
    }
}

// Smooth transitions for theme switching
* {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

// ============================================
// Global Dark Mode Fixes for Inputs & Forms
// ============================================
input,
textarea,
select {
    background-color: var(--color-input-bg);
    border-color: var(--color-input-border);
    color: var(--color-input-text);

    &::placeholder {
        color: var(--color-text-secondary);
        opacity: 0.7;
    }

    &:focus {
        outline: 2px solid $color-primary-500;
        outline-offset: 2px;
    }
}

// Select dropdowns dark mode
select {
    option {
        background-color: var(--color-bg-secondary);
        color: var(--color-text-primary);
    }
}

// Tables dark mode
table {
    thead {
        background-color: var(--color-table-header);

        th {
            color: var(--color-text-primary);
            font-weight: 600;
        }
    }

    tbody {
        tr {
            &:hover {
                background-color: var(--color-table-row-hover);
            }
        }

        td {
            color: var(--color-text-primary);
            border-color: var(--color-input-border);
        }
    }
}

// Cards dark mode enhancement
.card,
[class*="card"] {
    [data-theme="dark"] & {
        background-color: var(--color-bg-card);
        border-color: var(--color-input-border);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }
}

// Buttons dark mode
button {
    [data-theme="dark"] & {
        &:not([class*="primary"]):not([class*="danger"]) {
            background-color: var(--color-input-bg);
            color: var(--color-text-primary);
            border-color: var(--color-input-border);

            &:hover {
                background-color: var(--color-bg-card);
            }
        }
    }
}

// Modal backgrounds dark mode
[class*="modal"],
[class*="Modal"] {
    [data-theme="dark"] & {
        background-color: var(--color-bg-secondary);
        color: var(--color-text-primary);
    }
}

// Scrollbar dark mode
[data-theme="dark"] {
    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: var(--color-bg-primary);
    }

    ::-webkit-scrollbar-thumb {
        background: #44403c;
        border-radius: 4px;

        &:hover {
            background: #57534e;
        }
    }
}